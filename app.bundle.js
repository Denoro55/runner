!function(e){function t(t){for(var s,o,a=t[0],h=t[1],c=t[2],d=0,u=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(e[s]=h[s]);for(l&&l(t);u.length;)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],s=!0,a=1;a<i.length;a++){var h=i[a];0!==n[h]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},n={0:0},r=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window.webpackJsonp=window.webpackJsonp||[],h=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=h;r.push([2,1]),i()}([,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var s=i(6);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return s.Vector}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(0);const s=i(3),n=i(4),r={type:Phaser.AUTO,parent:"game-container",width:window.innerWidth,height:window.innerHeight,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[n.GameScene]};new s.Game(r)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;class s extends Phaser.Game{constructor(e){super(e),console.info("create game",e,this)}}t.Game=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;var s=i(5);Object.defineProperty(t,"GameScene",{enumerable:!0,get:function(){return s.GameScene}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;const s=i(1),n=i(7),r=i(8),o=i(11),a=i(12),h={cellSize:40,containerBorder:4,controlSize:70,xCellsCount:6,yCellsCount:6};let c,l,d,u,p,g;class f extends a.Scene{constructor(){super({key:o.ESceneName.game}),this.gameTime=0,this.deltaTime=0,this.lastSpawnTime=0,this.nextSpawnTime=0,this.score=0,this.obstacles=[],this.handleKeyDown=e=>{console.info("key down",e);let t=0;this.obstacles.forEach(i=>{i.getNumber()===e&&i.isInCenter()&&(i.destroy(),t+=1,this.score+=1)}),0===t&&(this.score-=5)}}init(){}create(){console.info("create game!");const e=this.getGameConfig(),t=this.getGameSize();this.graphics=this.add.graphics({lineStyle:{width:h.containerBorder,color:16777215}}),this.cellsGraphics=this.add.graphics({lineStyle:{width:h.containerBorder,color:16777215}}),this.scoreText=this.add.text(t.width/2,e.cellSize,this.score.toString(),{fontFamily:"Arial",fontSize:"22px",color:"#ffffff"}).setOrigin(.5),this.initKeyboard(),this.draw()}initKeyboard(){c=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ONE),l=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.TWO),d=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.THREE),u=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.FOUR),p=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.FIVE),g=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SIX),c.on("down",this.handleKeyDown),l.on("down",this.handleKeyDown),d.on("down",this.handleKeyDown),u.on("down",this.handleKeyDown),p.on("down",this.handleKeyDown),g.on("down",this.handleKeyDown)}update(e,t){this.deltaTime=t/16,this.gameTime+=15*this.deltaTime,this.obstacles.forEach(e=>{e.update()}),this.gameTime>this.nextSpawnTime&&this.spawnObstacle(),this.scoreText.text=this.score.toString()}spawnObstacle(){this.obstacles.push(new r.BasicBox(this,{width:1,height:1,number:Math.ceil(6*Math.random())})),this.nextSpawnTime=this.gameTime+1e3}destroyObstacle(e){this.obstacles=this.obstacles.filter(t=>t!==e)}getGameConfig(){return h}getCellSize(){return h.cellSize}getPos(e){return e*this.getCellSize()}getYContainerPos(e){return this.getContainerStartPos().y+e*this.getCellSize()}getXContainerPos(e){return this.getContainerStartPos().x+e*this.getCellSize()}getContainerHeight(){return h.yCellsCount*h.cellSize+2*h.containerBorder}getContainerStartPos(){const e=this.getGameCenter(),t=this.getGameSize(),i=this.getContainerHeight(),s=t.height-3*h.controlSize-4*h.cellSize-i;return{x:e.x-h.xCellsCount*h.cellSize/2,y:2*h.cellSize+s/2}}getCenterLine(){const e=this.getContainerStartPos(),t=this.getContainerHeight();return e.y+t}onOutOfGame(){this.score-=5}draw(){this.drawCells(),this.drawCenterLine(),this.drawControls()}drawCenterLine(){const e=this.getContainerStartPos(),t=this.getGameSize(),i=this.getContainerHeight(),s=new Phaser.Geom.Line(0,e.y+i,t.width,e.y+i);this.graphics.strokeLineShape(s)}drawGameContainer(){const e=this.getContainerStartPos(),t=this.getGameSize(),i=h.yCellsCount*h.cellSize+2*h.containerBorder,s=(t.height,new Phaser.Geom.Rectangle(e.x-h.containerBorder,e.y-h.containerBorder,h.xCellsCount*h.cellSize+2*h.containerBorder,i));this.graphics.strokeRectShape(s)}drawCells(){this.cellsGraphics.setAlpha(.075);for(let e=0;e<h.xCellsCount;e++)for(let t=0;t<h.yCellsCount;t++){const i=new Phaser.Geom.Rectangle(this.getXContainerPos(e),this.getYContainerPos(t),this.getCellSize(),this.getCellSize());this.cellsGraphics.strokeRectShape(i)}}drawControls(){const e=this.getGameSize(),t=this.getGameConfig(),i=t.controlSize;for(let r=0;r<3;r++)new n.Button(this,{pos:new s.Vector(t.containerBorder,e.height-t.containerBorder-i-i*r),width:i,height:i,text:(r+1).toString(),onPointerDown:()=>{this.handleKeyDown(r+1)}});for(let r=0;r<3;r++)new n.Button(this,{pos:new s.Vector(e.width-i-t.containerBorder,e.height-t.containerBorder-i-i*r),width:i,height:i,text:(r+4).toString(),onPointerDown:()=>{this.handleKeyDown(r+4)}})}}t.GameScene=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;t.Vector=class{constructor(e,t){this.x=e,this.y=t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;t.Button=class{constructor(e,t){this.scene=e,this.params=t,this.rectShape=new Phaser.Geom.Rectangle(t.pos.x,t.pos.y,t.width,t.height),this.graphics=e.add.graphics({lineStyle:{width:4,color:16777215}}).setInteractive(this.rectShape,Phaser.Geom.Rectangle.Contains),this.buttonText=e.add.text(t.pos.x+t.width/2,t.pos.y+t.height/2,this.params.text,{fontFamily:"Arial",fontSize:"22px",color:"#ffffff"}).setOrigin(.5),this.initListeners(),this.draw()}initListeners(){const{graphics:e,params:t}=this;e.on("pointerdown",()=>{var e;null===(e=t.onPointerDown)||void 0===e||e.call(t)})}draw(){this.graphics.strokeRectShape(this.rectShape)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicBox=void 0;var s=i(9);Object.defineProperty(t,"BasicBox",{enumerable:!0,get:function(){return s.BasicBox}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicBox=void 0;const s=i(1),n=i(10);class r extends n.Obstacle{constructor(e,t){super(e,t),this.speed=2,this.params=t;const i=this.scene.getGameConfig();this.graphics=this.scene.add.graphics({lineStyle:{width:i.containerBorder,color:16777215}});const n=this.scene.getXContainerPos(Math.floor(Math.random()*(i.xCellsCount-this.params.width+1))),r=this.scene.getYContainerPos(1-this.params.height);this.pos=new s.Vector(n,r),this.text=e.add.text(-100,-100,this.params.number.toString(),{fontFamily:"Arial",fontSize:"22px",color:"#ffffff"}).setOrigin(.5),this.draw()}update(){const e=this.scene.getGameConfig();if(this.pos.y+=this.scene.deltaTime*this.speed,this.text.x=this.pos.x+e.cellSize/2,this.text.y=this.pos.y+e.cellSize/2,this.pos.y>this.scene.getYContainerPos(e.yCellsCount+1))return this.destroy(),void this.scene.onOutOfGame();this.isInCenter()?this.graphics.setAlpha(1):this.graphics.setAlpha(.5),this.draw()}destroy(){this.graphics.clear(),this.scene.destroyObstacle(this),this.text.destroy()}draw(){this.graphics.clear();const e=this.scene.getGameConfig(),t=new Phaser.Geom.Rectangle(this.pos.x,this.pos.y,e.cellSize*this.params.width,e.cellSize*this.params.height);this.graphics.strokeRectShape(t)}}t.BasicBox=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Obstacle=void 0;t.Obstacle=class{constructor(e,t){this.scene=e,this.baseParams=t}isInCenter(){const e=this.scene.getCenterLine(),t=this.scene.getGameConfig();return this.pos.y+t.cellSize>e&&this.pos.y<e}getNumber(){return this.baseParams.number}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ESceneName=void 0,function(e){e.game="GameScene"}(t.ESceneName||(t.ESceneName={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;class s extends Phaser.Scene{getGameSize(){return{width:this.game.config.width,height:this.game.config.height}}getGameCenter(){const e=this.getGameSize();return{x:Math.round(e.width/2),y:Math.round(e.height/2)}}}t.Scene=s}]);